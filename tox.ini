[tox]
envlist=py26,py27,pypy,py33,py34,py35,py36,py37,py38,py39

[tox:travis]
3.5 = py35, coveralls

[gh-actions]
python =
    2.7: py27
    pypy2: pypy
    3.5: py35
    pypy3: pypy3
    3.6: py36
    3.7: py37
    3.8: py38
    3.9: py39
    3.10-dev: py310

[testenv]
deps=unittest2
commands=python {posargs:-m unittest2 discover}

[testenv:py26]
commands=python {posargs:{envbindir}/unit2}

[testenv:cover]
basepython=python3.5
deps=
    coverage
    unittest2
commands=
    coverage erase
    coverage run {posargs:-m unittest2}
    coverage html
    coverage report

[testenv:coveralls]
passenv=TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
basepython=python3.9
deps=
    coverage
    coveralls
    unittest2
commands=
    coverage run --source repeated_test -m unittest2
    coveralls

[testenv:coveralls-gh-actions]
passenv=GITHUB_*
commands=
    coveralls --service=github
